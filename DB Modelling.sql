
--TABLE OLUÞTURMALARI--
CREATE TABLE YAZAR(
YAZAR_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
YAZAR_ADI VARCHAR2(255), 
YAZAR_SOYADI VARCHAR2(255),
YAZAR_EMAIL VARCHAR2(255),
YAZAR_TEL VARCHAR2(50)
);
CREATE TABLE KITAP(
KITAP_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
KITAP_ADI VARCHAR2(50), 
FIYAT NUMBER(9,2),
YAZAR_ID NUMBER,
YAYINEVI_ID NUMBER
);
CREATE TABLE YAYINEVI(
YAYINEVI_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
YAYINEVI_ADI VARCHAR2(255), 
--KITAP_ID NUMBER,
YAYINEVI_EMAIL VARCHAR2(255),
YAYINEVI_TEL VARCHAR2(50),
ADRES VARCHAR2(255)
);

--CONSTAINT ATAMALARI--
ALTER TABLE KITAP ADD CONSTRAINT fk_KITAPYAZAR FOREIGN KEY( YAZAR_ID ) REFERENCES YAZAR( YAZAR_ID );
ALTER TABLE KITAP ADD CONSTRAINT fk_KITAPYAYINEVI FOREIGN KEY( YAYINEVI_ID ) REFERENCES YAYINEVI( YAYINEVI_ID );
/*ALTER TABLE YAYINEVI add CONSTRAINT fk_YAYINEVIKITAP FOREIGN KEY( KITAP_ID ) REFERENCES KITAP( KITAP_ID ); BURDA YAYINEVINE KITAP_ID ATAMIÞTIM. 
BÝR YAYINEVININ BÝRDEN FAZLA KÝTABI DA OLABÝLÝR DÝYE.BUNUN ÝÇÝN BÝR TABLO DAHA YAPMAM GEREKÝYORDU SANIRIM YAYINEVI_ID VE KITAP_ID. NASIL INSERT EDECEÐÝMÝ DÜÞÜNDÜM.

CREATE TABLE ILISKI_KIT_YAY(
YAYINEVIID NUMBER,
KITAPID NUMBER
);
*/


/*VERÝ EKLEMELERÝ*/
INSERT ALL 
INTO YAZAR(YAZAR_ID, YAZAR_ADI, YAZAR_SOYADI, YAZAR_EMAIL, YAZAR_TEL) VALUES(1,'REÞAT NURI','GUNTEKIN','RESAT@RESAT.COM','2122334534')
INTO YAZAR(YAZAR_ID, YAZAR_ADI, YAZAR_SOYADI, YAZAR_EMAIL, YAZAR_TEL) VALUES(2,'YAÞAR', 'KEMAL', 'YASAR@YASAR.COM', '2125476547')
INTO YAZAR(YAZAR_ID, YAZAR_ADI, YAZAR_SOYADI, YAZAR_EMAIL, YAZAR_TEL) VALUES(3,'OMER', 'SEYFETTIN', 'OMER@OMER.COM', '2122534534')
INTO YAZAR(YAZAR_ID, YAZAR_ADI, YAZAR_SOYADI, YAZAR_EMAIL, YAZAR_TEL) VALUES(4,'VICTOR', 'HUGO', 'VICTOR@VICTOR.COM', '2124534564')
INTO YAZAR(YAZAR_ID, YAZAR_ADI, YAZAR_SOYADI, YAZAR_EMAIL, YAZAR_TEL) VALUES(5,'MAKSIM', 'GORKI', 'MAX@GRK.COM', '3234534565')
INTO YAZAR(YAZAR_ID, YAZAR_ADI, YAZAR_SOYADI, YAZAR_EMAIL, YAZAR_TEL) VALUES(6,'SAIT FAIK', 'ABASIYANIK', 'SAIT@ORHAN.COM', '2124534454')
INTO YAZAR(YAZAR_ID, YAZAR_ADI, YAZAR_SOYADI, YAZAR_EMAIL, YAZAR_TEL) VALUES(7,'CHARLES', 'DICKENS', 'PROF@XMEN.COM', '2134566666')
SELECT DUMMY FROM DUAL;
INSERT ALL 
INTO YAYINEVI(YAYINEVI_ID, YAYINEVI_ADI,YAYINEVI_EMAIL, YAYINEVI_TEL, ADRES)VALUES(1,'INKILAP', 'IN@INKILAP.COM', '4343423434', 'ISTANBUL')
INTO YAYINEVI(YAYINEVI_ID, YAYINEVI_ADI,YAYINEVI_EMAIL, YAYINEVI_TEL, ADRES)VALUES(2,'TDK', 'INFO@TDK.COM', '34234324324', 'ANKARA')
INTO YAYINEVI(YAYINEVI_ID, YAYINEVI_ADI,YAYINEVI_EMAIL, YAYINEVI_TEL, ADRES)VALUES(3,'TUBITAK', 'TUBI@TUBITAK.COM', '7867878', 'IZMIR')
INTO YAYINEVI(YAYINEVI_ID, YAYINEVI_ADI,YAYINEVI_EMAIL, YAYINEVI_TEL, ADRES)VALUES(4,'ZAFER', 'YENDIK@ZAFER.COM', '35647568878', 'BURSA')
INTO YAYINEVI(YAYINEVI_ID, YAYINEVI_ADI,YAYINEVI_EMAIL, YAYINEVI_TEL, ADRES)VALUES(5,'YAPI KREDI', 'YK@ISMAIL.COM', '1345675674', 'ISTANBUL')
INTO YAYINEVI(YAYINEVI_ID, YAYINEVI_ADI,YAYINEVI_EMAIL, YAYINEVI_TEL, ADRES)VALUES(6,'PEGASUS', 'AT@PEGASUS.COM', '435678889', 'CENNET')
SELECT DUMMY FROM DUAL;
INSERT ALL 
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(1,'CALIKUSU',9.00,1,2)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(2,'COCUKLUGUM',19.00,5,4)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(3,'YAPRAK DOKUMU',99.00,1,3)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(4,'AGRI DAGI EFSANESI',5.00,2,2)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(5,'DIYET',6.00,3,6)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(6,'SEFILLER',3.00,4,1)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(7,'EKMEGIMI KAZANIRKEN',17.00,5,5)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(8,'SEMAVER',5.00,6,2)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(9,'SAHMERDAN',15.00,6,5)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(10,'ZOR YILLAR',55.00,7,2)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(11,'OLIVER TWIST',24.00,7,4)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(12,'ACIMAK',9.00,1,2)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(13,'BUYUK UMUTLAR',9.00,7,6)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(14,'PEMBE INCILI KAFTAN',34.00,3,3)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(15,'YAGMURCUK KUSU',9.00,2,1)
INTO KITAP(KITAP_ID, KITAP_ADI, FIYAT, YAZAR_ID, YAYINEVI_ID)VALUES(16,'OLMEZ OTU',9.00,2,4)
SELECT DUMMY FROM DUAL;

--SÝNONÝMLER--
CREATE SYNONYM SINO_YAYINEVI for "YAYINEVI";
CREATE SYNONYM SINO_KITAP for "KITAP";
CREATE SYNONYM SINO_YAZAR for "YAZAR";

--VÝEW-- ÖRNEK OLARAK YAZARLARIN KAÇ TANE KÝTAPLARI VAR ?
CREATE VIEW YAZAR_KITAP_SAYISI AS
SELECT Y.YAZAR_ADI|| ' ' || Y.YAZAR_SOYADI  "ADI SOYADI",(SELECT COUNT(*) FROM KITAP K WHERE K.YAZAR_ID=Y.YAZAR_ID)SAYISI FROM YAZAR Y;



